(self.webpackChunk_site_blog=self.webpackChunk_site_blog||[]).push([[5048],{3905:function(e,n,t){"use strict";t.d(n,{Zo:function(){return u},kt:function(){return d}});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=a.createContext({}),p=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},u=function(e){var n=p(e.components);return a.createElement(s.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),m=p(t),d=r,g=m["".concat(s,".").concat(d)]||m[d]||c[d]||o;return t?a.createElement(g,l(l({ref:n},u),{},{components:t})):a.createElement(g,l({ref:n},u))}));function d(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,l=new Array(o);l[0]=m;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var p=2;p<o;p++)l[p]=t[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},1830:function(e,n,t){"use strict";t.r(n),t.d(n,{frontMatter:function(){return i},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return u},default:function(){return m}});var a=t(2122),r=t(9756),o=(t(7294),t(3905)),l=["components"],i={},s=void 0,p={unversionedId:"core/server/how_to_handle_command_line_arguments_in_node_js_scripts_en",id:"core/server/how_to_handle_command_line_arguments_in_node_js_scripts_en",isDocsHomePage:!1,title:"how_to_handle_command_line_arguments_in_node_js_scripts_en",description:"Introduction",source:"@site/docs/core/server/how_to_handle_command_line_arguments_in_node_js_scripts_en.md",sourceDirName:"core/server",slug:"/core/server/how_to_handle_command_line_arguments_in_node_js_scripts_en",permalink:"/blog/docs/core/server/how_to_handle_command_line_arguments_in_node_js_scripts_en",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/core/server/how_to_handle_command_line_arguments_in_node_js_scripts_en.md",version:"current",frontMatter:{}},u=[{value:"Introduction",id:"introduction",children:[]},{value:"Prerequisites",id:"prerequisites",children:[]},{value:"Using Argument Vectors",id:"using-argument-vectors",children:[]},{value:"Using Argument Flags",id:"using-argument-flags",children:[]},{value:"Using Multiple Arguments with Values",id:"using-multiple-arguments-with-values",children:[]},{value:"Using <code>commander</code>",id:"using-commander",children:[]},{value:"Conclusion",id:"conclusion",children:[]}],c={toc:u};function m(e){var n=e.components,t=(0,r.Z)(e,l);return(0,o.kt)("wrapper",(0,a.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h3",{id:"introduction"},"Introduction"),(0,o.kt)("p",null,"Command-line arguments are a way to provide additional input for commands. You can use command-line arguments to add flexibility and customization to your Node.js scripts."),(0,o.kt)("p",null,"In this article, you will learn about argument vectors, detecting argument flags, handling multiple arguments and values, and using the ",(0,o.kt)("inlineCode",{parentName:"p"},"commander")," package."),(0,o.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,o.kt)("p",null,"To follow through this tutorial, you\u2019ll need:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"A local development environment for Node.js. Follow ",(0,o.kt)("a",{parentName:"li",href:"https://www.digitalocean.com/community/tutorial_series/how-to-install-node-js-and-create-a-local-development-environment"},"How to Install Node.js and Create a Local Development Environment"),".")),(0,o.kt)("p",null,"This tutorial was verified with Node v16.10.0, ",(0,o.kt)("inlineCode",{parentName:"p"},"npm")," v7.12.2, and ",(0,o.kt)("inlineCode",{parentName:"p"},"commander")," v7.2.0."),(0,o.kt)("h2",{id:"using-argument-vectors"},"Using Argument Vectors"),(0,o.kt)("p",null,"Node.js supports a list of passed arguments, known as an ",(0,o.kt)("em",{parentName:"p"},"argument vector"),". The argument vector is an array available from ",(0,o.kt)("inlineCode",{parentName:"p"},"process.argv")," in your Node.js script."),(0,o.kt)("p",null,"The array contains everything that\u2019s passed to the script, including the Node.js executable and the path and filename of the script."),(0,o.kt)("p",null,"If you were to run the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"node example.js -a -b -c\n")),(0,o.kt)("p",null,"Copy"),(0,o.kt)("p",null,"Your argument vector would contain five items:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"[\n  '/usr/bin/node',\n  '/path/to/example.js',\n  '-a',\n  '-b',\n  '-c'\n]\n")),(0,o.kt)("p",null,"Copy"),(0,o.kt)("p",null,"At the very least, a script that\u2019s run without any arguments will still contain two items in the array, the ",(0,o.kt)("inlineCode",{parentName:"p"},"node")," executable and the script file that is being run."),(0,o.kt)("p",null,"Typically the argument vector is paired with an ",(0,o.kt)("em",{parentName:"p"},"argument count")," ","(",(0,o.kt)("inlineCode",{parentName:"p"},"argc"),")"," that tells you how many arguments have been passed in. Node.js lacks this particular variable but we can always grab the ",(0,o.kt)("inlineCode",{parentName:"p"},"length")," of the argument vector array:"),(0,o.kt)("p",null,"example.js"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"if (process.argv.length === 2) {\n  console.error('Expected at least one argument!');\n  process.exit(1);\n}\n")),(0,o.kt)("p",null,"Copy"),(0,o.kt)("p",null,"This example code will check the ",(0,o.kt)("inlineCode",{parentName:"p"},"length")," of ",(0,o.kt)("inlineCode",{parentName:"p"},"argv"),". A length of ",(0,o.kt)("inlineCode",{parentName:"p"},"2")," would indicate that only the ",(0,o.kt)("inlineCode",{parentName:"p"},"node")," executable and the script file are present. If there are no arguments, it will print out the message: ",(0,o.kt)("inlineCode",{parentName:"p"},"Expected at least one argument!")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"exit"),"."),(0,o.kt)("h2",{id:"using-argument-flags"},"Using Argument Flags"),(0,o.kt)("p",null,"Let\u2019s consider an example that displays a default message. However, when a specific flag is present, it will display a different message."),(0,o.kt)("p",null,"example.js"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"if (process.argv[2] && process.argv[2] === '-f') {\n  console.log('Flag is present.');\n} else {\n  console.log('Flag is not present.');\n}\n")),(0,o.kt)("p",null,"Copy"),(0,o.kt)("p",null,"This script checks if we have a third item in our argument vector. The index is ",(0,o.kt)("inlineCode",{parentName:"p"},"2")," because arrays in JavaScript are zero-indexed. If a third item is present and is equal to ",(0,o.kt)("inlineCode",{parentName:"p"},"-f")," it will alter the output."),(0,o.kt)("p",null,"Here is an example of running the script without arguments:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"node example.js\n")),(0,o.kt)("p",null,"Copy"),(0,o.kt)("p",null,"And the generated output:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"OutputFlag is not present.\n")),(0,o.kt)("p",null,"Here is an example of running the script with arguments:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"node example.js -f\n")),(0,o.kt)("p",null,"Copy"),(0,o.kt)("p",null,"And the generated output:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"OutputFlag is present.\n")),(0,o.kt)("p",null,"We don\u2019t have to limit ourselves to modifying the conditional control structure, we can use the actual value that\u2019s been passed to the script as well:"),(0,o.kt)("p",null,"example.js"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"const custom = (process.argv[2] || 'Default');\nconsole.log('Custom: ', custom);\n")),(0,o.kt)("p",null,"Copy"),(0,o.kt)("p",null,"Instead of a conditional based on the argument, this script takes the value that is passed in ","(","defaulting to ",(0,o.kt)("inlineCode",{parentName:"p"},'"Default"')," when the argument is missing",")"," and injects it into the script output."),(0,o.kt)("h2",{id:"using-multiple-arguments-with-values"},"Using Multiple Arguments with Values"),(0,o.kt)("p",null,"We have written a script that accepts an argument and one that accepts a raw value, what about in scenarios where we want to use a value in conjunction with an argument\\?"),(0,o.kt)("p",null,"To make things a bit more complex, let\u2019s also accept multiple arguments:"),(0,o.kt)("p",null,"example.js"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"// Check to see if the -f argument is present\nconst flag = (\n  process.argv.indexOf('-f') > -1 ? 'Flag is present.' : 'Flag is not present.'\n);\n\n// Checks for --custom and if it has a value\nconst customIndex = process.argv.indexOf('--custom');\nlet customValue;\n\nif (customIndex > -1) {\n  // Retrieve the value after --custom\n  customValue = process.argv[customIndex + 1];\n}\n\nconst custom = (customValue || 'Default');\n\nconsole.log('Flag:', `${flag}`);\nconsole.log('Custom:', `${custom}`);\n")),(0,o.kt)("p",null,"Copy"),(0,o.kt)("p",null,"By using ",(0,o.kt)("inlineCode",{parentName:"p"},"indexOf")," instead of relying on specific index values, we are able to look for the arguments anywhere in the argument vector, regardless of the order","!"),(0,o.kt)("p",null,"Here is an example of running the script without arguments:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"node example.js\n")),(0,o.kt)("p",null,"And the generated output:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"OutputFlag: Flag is not present.\nCustom: Default\n")),(0,o.kt)("p",null,"Here is an example of running the script with arguments:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"node example.js -f --custom Override\n")),(0,o.kt)("p",null,"Copy"),(0,o.kt)("p",null,"And the generated output:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"OutputFlag: Flag is present.\nCustom: Override\n")),(0,o.kt)("p",null,"Now, your command-line script can accept multiple arguments and values."),(0,o.kt)("h2",{id:"using-commander"},"Using ",(0,o.kt)("inlineCode",{parentName:"h2"},"commander")),(0,o.kt)("p",null,"The aforementioned examples work when the argument input is quite specific. However, users may attempt to use arguments with and without equal signs ","(",(0,o.kt)("inlineCode",{parentName:"p"},"-nJaneDoe")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"--name=JohnDoe"),")",", quoted strings to pass-in values with spaces ","(",(0,o.kt)("inlineCode",{parentName:"p"},'-n "Jane Doe"'),")"," and even have arguments aliased to provide short and longhand versions."),(0,o.kt)("p",null,"That\u2019s where the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/tj/commander.js"},(0,o.kt)("inlineCode",{parentName:"a"},"commander"))," library can help."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"commander")," is a popular Node.js library that is inspired by the Ruby library of the same name."),(0,o.kt)("p",null,"First, in your project directory, initialize your project:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm init\n")),(0,o.kt)("p",null,"Copy"),(0,o.kt)("p",null,"Then, install ",(0,o.kt)("inlineCode",{parentName:"p"},"commander"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm install commander@7.2.0\n")),(0,o.kt)("p",null,"Copy"),(0,o.kt)("p",null,"Let\u2019s take our previous example and port it to use ",(0,o.kt)("inlineCode",{parentName:"p"},"commander"),":"),(0,o.kt)("p",null,"example-commander.js"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"const commander = require('commander');\n\ncommander\n  .version('1.0.0', '-v, --version')\n  .usage('[OPTIONS]...')\n  .option('-f, --flag', 'Detects if the flag is present.')\n  .option('-c, --custom <value>', 'Overwriting value.', 'Default')\n  .parse(process.argv);\n\nconst options = commander.opts();\n\nconst flag = (options.flag ? 'Flag is present.' : 'Flag is not present.');\n\nconsole.log('Flag:', `${flag}`);\nconsole.log('Custom:', `${options.custom}`);\n")),(0,o.kt)("p",null,"Copy"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"commander")," does all of the hard work by processing ",(0,o.kt)("inlineCode",{parentName:"p"},"process.argv")," and adding the arguments and any associated values as properties in our ",(0,o.kt)("inlineCode",{parentName:"p"},"commander")," object."),(0,o.kt)("p",null,"We can easily version our script and report the version number with ",(0,o.kt)("inlineCode",{parentName:"p"},"-v")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"--version"),". We also get some friendly output that explains the script\u2019s usage by passing the ",(0,o.kt)("inlineCode",{parentName:"p"},"--help")," argument and if you happen to pass an argument that\u2019s not defined or is missing a passed value, it will throw an error."),(0,o.kt)("h2",{id:"conclusion"},"Conclusion"),(0,o.kt)("p",null,"In this article, you learned about argument vectors, detecting argument flags, handling multiple arguments and values, and using the ",(0,o.kt)("inlineCode",{parentName:"p"},"commander")," package."),(0,o.kt)("p",null,"While you can quickly create scripts with your own command-line arguments, you may want to consider utilizing ",(0,o.kt)("inlineCode",{parentName:"p"},"commander")," or ",(0,o.kt)("a",{parentName:"p",href:"https://www.digitalocean.com/community/tutorials/nodejs-interactive-command-line-prompts"},(0,o.kt)("inlineCode",{parentName:"a"},"Inquirer.js"))," if you would like more robustness and maintainability."))}m.isMDXComponent=!0}}]);