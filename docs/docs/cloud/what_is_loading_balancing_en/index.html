<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.3">
<link rel="alternate" type="application/rss+xml" href="/blog/blog/rss.xml" title="æå¿—åçš„åšå®¢ Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/blog/atom.xml" title="æå¿—åçš„åšå®¢ Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-478GETJ8M8","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<script async src="https://hm.baidu.com/hm.js?6cf455aa46dc50a069ab28ba6ecbf4ce"></script><title data-react-helmet="true">what_is_loading_balancing_en | æå¿—åçš„åšå®¢</title><meta data-react-helmet="true" property="og:url" content="https://dear-lizhihua.github.io/blog/docs//blog/docs/cloud/what_is_loading_balancing_en"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="what_is_loading_balancing_en | æå¿—åçš„åšå®¢"><meta data-react-helmet="true" name="description" content="Introduction"><meta data-react-helmet="true" property="og:description" content="Introduction"><link data-react-helmet="true" rel="shortcut icon" href="/blog/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://dear-lizhihua.github.io/blog/docs//blog/docs/cloud/what_is_loading_balancing_en"><link data-react-helmet="true" rel="alternate" href="https://dear-lizhihua.github.io/blog/docs//blog/docs/cloud/what_is_loading_balancing_en" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://dear-lizhihua.github.io/blog/docs//blog/docs/cloud/what_is_loading_balancing_en" hreflang="x-default"><link rel="stylesheet" href="/blog/assets/css/styles.1a90c8a2.css">
<link rel="preload" href="/blog/assets/js/runtime~main.59631cfa.js" as="script">
<link rel="preload" href="/blog/assets/js/main.cdfbdb9d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/blog/"><img src="/blog/img/logo.svg" alt="logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/blog/img/logo.svg" alt="logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">æå¿—åçš„åšå®¢</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog/docs">æ–‡æ¡£</a><a class="navbar__item navbar__link" href="/blog/blog">åšå®¢</a></div><div class="navbar__items navbar__items--right"><a href="http://netsysd.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>å¤§ä¼—å…‰æ˜å¯¼èˆª<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a class="navbar__item navbar__link" href="/blog/blog/change-log">æ›´æ–°æ—¥å¿—</a><a class="navbar__item navbar__link" href="/blog/docs/translations/babel">Babel æ–‡æ¡£</a><a class="navbar__item navbar__link" href="/blog/docs/translations/rollup">Rollup æ–‡æ¡£</a><a href="https://github.com/dear-lizhihua" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ğŸŒ</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/blog/"><img src="/blog/img/logo.svg" alt="logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/blog/img/logo.svg" alt="logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">æå¿—åçš„åšå®¢</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/blog/docs">æ–‡æ¡£</a></li><li class="menu__list-item"><a class="menu__link" href="/blog/blog">åšå®¢</a></li><li class="menu__list-item"><a href="http://netsysd.com/" target="_blank" rel="noopener noreferrer" class="menu__link"><span>å¤§ä¼—å…‰æ˜å¯¼èˆª<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a class="menu__link" href="/blog/blog/change-log">æ›´æ–°æ—¥å¿—</a></li><li class="menu__list-item"><a class="menu__link" href="/blog/docs/translations/babel">Babel æ–‡æ¡£</a></li><li class="menu__list-item"><a class="menu__link" href="/blog/docs/translations/rollup">Rollup æ–‡æ¡£</a></li><li class="menu__list-item"><a href="https://github.com/dear-lizhihua" target="_blank" rel="noopener noreferrer" class="menu__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><main class="docMainContainer_3ufF docMainContainerEnhanced_3NYZ"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">what_is_loading_balancing_en</h1></header><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="introduction"></a>Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">#</a></h3><p>Load balancing is a key component of highly-available infrastructures commonly used to improve the performance and reliability of web sites, applications, databases and other services by distributing the workload across multiple servers.</p><p>A web infrastructure with no load balancing might look something like the following:</p><p><img src="https://assets.digitalocean.com/articles/HAProxy/web_server.png" alt="web_server"></p><p>In this example, the user connects directly to the web server, at <em>yourdomain.com</em>. If this single web server goes down, the user will no longer be able to access the website. In addition, if many users try to access the server simultaneously and it is unable to handle the load, they may experience slow load times or may be unable to connect at all.</p><p>This single point of failure can be mitigated by introducing a load balancer and at least one additional web server on the backend. Typically, all of the backend servers will supply identical content so that users receive consistent content regardless of which server responds.</p><p><img src="https://assets.digitalocean.com/articles/high-availability/Diagram_2.png" alt="Diagram 01: Load Balancers / Top-to-bottom"></p><p>In the example illustrated above, the user accesses the load balancer, which forwards the userâ€™s request to a backend server, which then responds directly to the userâ€™s request. In this scenario, the single point of failure is now the load balancer itself. This can be mitigated by introducing a second load balancer, but before we discuss that, letâ€™s explore how load balancers work.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="what-kind-of-traffic-can-load-balancers-handle"></a>What kind of traffic can load balancers handle\?<a class="hash-link" href="#what-kind-of-traffic-can-load-balancers-handle" title="Direct link to heading">#</a></h2><p>Load balancer administrators create forwarding rules for four main types of traffic:</p><ul><li><strong>HTTP</strong> â€” Standard HTTP balancing directs requests based on standard HTTP mechanisms. The Load Balancer sets the <code>X-Forwarded-For</code>, <code>X-Forwarded-Proto</code>, and <code>X-Forwarded-Port</code> headers to give the backends information about the original request.</li><li><strong>HTTPS</strong> â€” HTTPS balancing functions the same as HTTP balancing, with the addition of encryption. Encryption is handled in one of two ways: either with <strong>SSL passthrough</strong> which maintains encryption all the way to the backend or with <strong>SSL termination</strong> which places the decryption burden on the load balancer but sends the traffic unencrypted to the back end.</li><li><strong>TCP</strong> â€” For applications that do not use HTTP or HTTPS, TCP traffic can also be balanced. For example, traffic to a database cluster could be spread across all of the servers.</li><li><strong>UDP</strong> â€” More recently, some load balancers have added support for load balancing core internet protocols like DNS and syslogd that use UDP.</li></ul><p>These forwarding rules will define the protocol and port on the load balancer itself and map them to the protocol and port the load balancer will use to route the traffic to on the backend.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-does-the-load-balancer-choose-the-backend-server"></a>How does the load balancer choose the backend server\?<a class="hash-link" href="#how-does-the-load-balancer-choose-the-backend-server" title="Direct link to heading">#</a></h2><p>Load balancers choose which server to forward a request to based on a combination of two factors. They will first ensure that any server they can choose is actually responding appropriately to requests and then use a pre-configured rule to select from among that healthy pool.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="health-checks"></a>Health Checks<a class="hash-link" href="#health-checks" title="Direct link to heading">#</a></h3><p>Load balancers should only forward traffic to â€œhealthyâ€ backend servers. To monitor the health of a backend server, health checks regularly attempt to connect to backend servers using the protocol and port defined by the forwarding rules to ensure that servers are listening. If a server fails a health check, and therefore is unable to serve requests, it is automatically removed from the pool, and traffic will not be forwarded to it until it responds to the health checks again.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="load-balancing-algorithms"></a>Load Balancing Algorithms<a class="hash-link" href="#load-balancing-algorithms" title="Direct link to heading">#</a></h3><p>The load balancing algorithm that is used determines which of the healthy servers on the backend will be selected. A few of the commonly used algorithms are:</p><p><strong>Round Robin</strong> â€” Round Robin means servers will be selected sequentially. The load balancer will select the first server on its list for the first request, then move down the list in order, starting over at the top when it reaches the end.</p><p><strong>Least Connections</strong> â€” Least Connections means the load balancer will select the server with the least connections and is recommended when traffic results in longer sessions.</p><p><strong>Source</strong> â€” With the Source algorithm, the load balancer will select which server to use based on a hash of the source IP of the request, such as the visitorâ€™s IP address. This method ensures that a particular user will consistently connect to the same server.</p><p>The algorithms available to administrators vary depending on the specific load balancing technology in use.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-do-load-balancers-handle-state"></a>How do load balancers handle state\?<a class="hash-link" href="#how-do-load-balancers-handle-state" title="Direct link to heading">#</a></h3><p>Some applications require that a user continues to connect to the same backend server. A Source algorithm creates an affinity based on client IP information. Another way to achieve this at the web application level is through <strong>sticky sessions</strong>, where the load balancer sets a cookie and all of the requests from that session are directed to the same physical server.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="redundant-load-balancers"></a>Redundant Load Balancers<a class="hash-link" href="#redundant-load-balancers" title="Direct link to heading">#</a></h2><p>To remove the load balancer as a single point of failure, a second load balancer can be connected to the first to form a cluster, where each one monitors the othersâ€™ health. Each one is equally capable of failure detection and recovery.</p><p><img src="https://assets.digitalocean.com/articles/high-availability/Diagram_1.png" alt="Diagram 02: Cluster / Distributed"></p><p>In the event the main load balancer fails, DNS must take users to the to the second load balancer. Because DNS changes can take a considerable amount of time to be propagated on the Internet and to make this failover automatic, many administrators will use systems that allow for flexible IP address remapping, such as <a href="https://www.digitalocean.com/community/tutorials/how-to-use-floating-ips-on-digitalocean" target="_blank" rel="noopener noreferrer">floating IPs</a>. On demand IP address remapping eliminates the propagation and caching issues inherent in DNS changes by providing a static IP address that can be easily remapped when needed. The domain name can remain associated with the same IP address, while the IP address itself is moved between servers.</p><p>This is how a highly available infrastructure using Floating IPs might look:</p><p><img src="https://assets.digitalocean.com/articles/high_availability/ha-diagram-animated.gif" alt="Diagram 03: Floating IPs"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="conclusion"></a>Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">#</a></h2><p>In this article, weâ€™ve given an overview of load balancer concepts and how they work in general. To learn more about specific load balancing technologies, you might like to look at:</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="digitaloceans-load-balancing-service"></a>DigitalOceanâ€™s Load Balancing Service<a class="hash-link" href="#digitaloceans-load-balancing-service" title="Direct link to heading">#</a></h3><ul><li><a href="https://www.digitalocean.com/community/tutorials/how-to-create-your-first-digitalocean-load-balancer" target="_blank" rel="noopener noreferrer">How To Create Your First DigitalOcean Load Balancer</a></li><li><a href="https://www.digitalocean.com/community/tutorials/how-to-configure-ssl-passthrough-on-digitalocean-load-balancers" target="_blank" rel="noopener noreferrer">How To Configure SSL Passthrough on DigitalOcean Load Balancers</a></li><li><a href="https://www.digitalocean.com/community/tutorials/how-to-configure-ssl-termination-on-digitalocean-load-balancers" target="_blank" rel="noopener noreferrer">How To Configure SSL Termination on DigitalOcean Load Balancers</a></li><li><a href="https://docs.digitalocean.com/products/networking/load-balancers/how-to/tcp/" target="_blank" rel="noopener noreferrer">How To Balance TCP Traffic with DigitalOcean Load Balancers</a></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="haproxy"></a>HAProxy<a class="hash-link" href="#haproxy" title="Direct link to heading">#</a></h3><ul><li><a href="https://www.digitalocean.com/community/tutorials/an-introduction-to-haproxy-and-load-balancing-concepts" target="_blank" rel="noopener noreferrer">An Introduction to HAProxy and Load Balancing Concepts</a></li><li><a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-highly-available-haproxy-servers-with-keepalived-and-floating-ips-on-ubuntu-14-04" target="_blank" rel="noopener noreferrer">How To Set Up Highly Available HAProxy Servers with Keepalived and Floating IPs on Ubuntu 14.04</a></li><li><a href="https://www.digitalocean.com/community/tutorial_series/load-balancing-wordpress-with-haproxy" target="_blank" rel="noopener noreferrer">Load Balancing WordPress with HAProxy</a></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="nginx"></a>Nginx<a class="hash-link" href="#nginx" title="Direct link to heading">#</a></h3><ul><li><a href="https://www.digitalocean.com/community/tutorials/understanding-nginx-http-proxying-load-balancing-buffering-and-caching" target="_blank" rel="noopener noreferrer">Understanding Nginx HTTP Proxying, Load Balancing, Buffering, and Caching</a></li><li><a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-nginx-load-balancing-with-ssl-termination" target="_blank" rel="noopener noreferrer">How To Set Up Nginx Load Balancing with SSL Termination</a></li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/cloud/what_is_loading_balancing_en.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link">Introduction</a></li><li><a href="#what-kind-of-traffic-can-load-balancers-handle" class="table-of-contents__link">What kind of traffic can load balancers handle?</a></li><li><a href="#how-does-the-load-balancer-choose-the-backend-server" class="table-of-contents__link">How does the load balancer choose the backend server?</a><ul><li><a href="#health-checks" class="table-of-contents__link">Health Checks</a></li><li><a href="#load-balancing-algorithms" class="table-of-contents__link">Load Balancing Algorithms</a></li><li><a href="#how-do-load-balancers-handle-state" class="table-of-contents__link">How do load balancers handle state?</a></li></ul></li><li><a href="#redundant-load-balancers" class="table-of-contents__link">Redundant Load Balancers</a></li><li><a href="#conclusion" class="table-of-contents__link">Conclusion</a><ul><li><a href="#digitaloceans-load-balancing-service" class="table-of-contents__link">DigitalOceanâ€™s Load Balancing Service</a></li><li><a href="#haproxy" class="table-of-contents__link">HAProxy</a></li><li><a href="#nginx" class="table-of-contents__link">Nginx</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">æ–‡æ¡£</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog/docs/">å¼€å§‹</a></li></ul></div><div class="col footer__col"><div class="footer__title">è”ç³»åé¦ˆ</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/dear-lizhihua/blog/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>å‹å¥½è®¨è®º<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">æ›´å¤š</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/dear-lizhihua" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 æå¿—å</div></div></div></footer></div>
<script src="/blog/assets/js/runtime~main.59631cfa.js"></script>
<script src="/blog/assets/js/main.cdfbdb9d.js"></script>
</body>
</html>